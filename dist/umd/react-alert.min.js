!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types"),require("react-transition-group"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-transition-group","react-dom"],t):t((e=e||self).ReactAlert={},e.React,e.PropTypes,e.ReactTransitionGroup,e.ReactDOM)}(this,function(e,P,t,x,R){"use strict";var I="default"in P?P.default:P;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t=t&&t.hasOwnProperty("default")?t.default:t;function M(e){var t=e.children,n=e.options,r=n.position,o=n.containerStyle,i=D(e,["children","options"]),c=P.useMemo(function(){return function(e){var t={left:0,position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100%",pointerEvents:"none"};switch(e){case L.TOP_LEFT:return _({},t,{top:0,alignItems:"flex-start"});case L.TOP_CENTER:return _({},t,{top:0});case L.TOP_RIGHT:return _({},t,{top:0,alignItems:"flex-end"});case L.MIDDLE_LEFT:return _({},t,{top:"50%",alignItems:"flex-start"});case L.MIDDLE:return _({},t,{top:"50%"});case L.MIDDLE_RIGHT:return _({},t,{top:"50%",alignItems:"flex-end"});case L.BOTTOM_LEFT:return _({},t,{bottom:0,alignItems:"flex-start"});case L.BOTTOM_CENTER:return _({},t,{bottom:0});case L.BOTTOM_RIGHT:return _({},t,{bottom:0,alignItems:"flex-end"});default:return t}}(r)},[r]);return 0<t.length&&I.createElement("div",S({style:_({},c,{},o)},i),t)}function A(e){var t=e.children,n=e.type,r=D(e,["children","type"]);return I.createElement(x.Transition,S({},r,{timeout:250}),function(e){return I.createElement("div",{style:_({},l[n],{},s[n][e])},t)})}function n(e){var t=e.children,n=e.offset,o=e.position,i=e.timeout,c=e.type,r=e.transition,u=e.containerStyle,a=e.template,l=e.context,s=D(e,["children","offset","position","timeout","type","transition","containerStyle","template","context"]),f=P.useRef(null),p=P.useRef(null),m=P.useRef([]),d=w(P.useState([]),2),y=d[0],O=d[1];P.useEffect(function(){f.current=document.createElement("div"),f.current.id="__react-alert__",document.body.appendChild(f.current);var e=m.current;return function(){e.forEach(clearTimeout),f.current&&document.body.removeChild(f.current)}},[]);var b=P.useCallback(function(r){O(function(e){var t=e.length,n=e.filter(function(e){return e.id!==r.id});return t>n.length&&r.options.onClose&&r.options.onClose(),n})},[]),v=P.useCallback(function(){p.current.alerts.forEach(b)},[b]),E=P.useCallback(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={id:Math.random().toString(36).substr(2,9),message:e,options:_({position:t.position||o,timeout:i,type:c},t),close:function(){return b(n)}};if(n.options.timeout){var r=setTimeout(function(){b(n),m.current.splice(m.current.indexOf(r),1)},n.options.timeout);m.current.push(r)}return O(function(e){return e.concat(n)}),n.options.onOpen&&n.options.onOpen(),n},[o,b,i,c]),h=P.useCallback(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.type=k.SUCCESS,E(e,t)},[E]),g=P.useCallback(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.type=k.ERROR,E(e,t)},[E]),T=P.useCallback(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.type=k.INFO,E(e,t)},[E]);p.current={alerts:y,show:E,remove:b,removeAll:v,success:h,error:g,info:T};var j,C=(j=function(e){return e.options.position},y.reduce(function(e,t){var n=j(t);return e[n]||(e[n]=[]),e[n].push(t),e},{}));return I.createElement(l.Provider,{value:p},t,f.current&&R.createPortal(I.createElement(P.Fragment,null,Object.keys(L).map(function(e){var t=L[e];return I.createElement(x.TransitionGroup,S({appear:!0,key:t,options:{position:t,containerStyle:u},component:M},s),C[t]?C[t].map(function(e){return I.createElement(A,{type:r,key:e.id},I.createElement(a,S({style:{margin:n,pointerEvents:"all"}},e)))}):null)})),f.current))}var i,c,u=P.createContext(),L={TOP_LEFT:"top left",TOP_CENTER:"top center",TOP_RIGHT:"top right",MIDDLE_LEFT:"middle left",MIDDLE:"middle",MIDDLE_RIGHT:"middle right",BOTTOM_LEFT:"bottom left",BOTTOM_CENTER:"bottom center",BOTTOM_RIGHT:"bottom right"},k={INFO:"info",SUCCESS:"success",ERROR:"error"},a={FADE:"fade",SCALE:"scale"},l=(r(i={},a.FADE,{transition:"opacity ".concat(250,"ms ease"),opacity:0}),r(i,a.SCALE,{transform:"scale(1)",transition:"all ".concat(250,"ms ease-in-out")}),i),s=(r(c={},a.FADE,{entering:{opacity:0},entered:{opacity:1}}),r(c,a.SCALE,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(1)"}}),c);n.propTypes={offset:t.string,position:t.oneOf(Object.keys(L).map(function(e){return L[e]})),timeout:t.number,type:t.oneOf(Object.keys(k).map(function(e){return k[e]})),transition:t.oneOf(Object.keys(a).map(function(e){return a[e]})),containerStyle:t.object,template:t.oneOfType([t.element,t.func,t.elementType]).isRequired,context:t.shape({Provider:t.object,Consumer:t.object})},n.defaultProps={offset:"10px",position:L.TOP_CENTER,timeout:0,type:k.INFO,transition:a.FADE,containerStyle:{zIndex:100},context:u};e.Provider=n,e.positions=L,e.transitions=a,e.types=k,e.useAlert=function(e){var t=P.useContext(e||u);return P.useMemo(function(){return t.current},[t])},e.withAlert=function(e){var o=0<arguments.length&&void 0!==e?e:u;return function(r){function e(t,n){return I.createElement(o.Consumer,null,function(e){return I.createElement(r,S({ref:n},t,{alert:e.current}))})}return e.displayName="WithAlert(".concat(r.displayName||r.name||"Component",")"),I.forwardRef(e)}},Object.defineProperty(e,"__esModule",{value:!0})});
